<body class="custom-body">

    <section class="h-100 gradient-form " style="background-color: transparent">
        <div class="container py-5 h-100">
            <div class="row d-flex justify-content-center align-items-center h-100 transparent-div">
                
                <div class="col-xl-10">
                    <div *ngIf = "!admin()" class="warning">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-patch-exclamation" viewBox="0 0 16 16" style="color:purple">
                            <path d="M7.001 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.553.553 0 0 1-1.1 0L7.1 4.995z"/>
                            <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z"/>
                          </svg>
                        <p style = "opacity: 0.5; color: blueviolet;">Puede editar el campo de las observaciones de usuario con la información que pueda aclarar al administrado para la resolución.</p>
                      </div>
                    <div class="card rounded-3 text-black">
                        <div class="row g-0">
                            <div class="col-lg-12">
                                <div class="card-body p-md-5 mx-md-4">
                                    <app-alert></app-alert>

                                    <app-pop-up></app-pop-up>
                                    <div class="text-center">
                                        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/lotus.webp" style="width: 185px;" alt="logo">
                                        <h2 class="mt-1 mb-5 pb-1">ADMINISTRACION NOTIFICACIONES
                                        </h2>
                                        
                                        </div>
                                       
                                    <div class="row">
                                        <div class="col-lg-12  ">
                                            <h3 *ngIf = "!admin()" style="opacity: 0.4;">
                                                NO LEIDAS</h3>
                                                <table class = "table table-borderless">
                                                    <thead>
                                                        <tr >
                                                            <th></th>
                                                            <th *ngIf = "admin()">Usuario</th>
                                                            <th>Sensor</th>
                                                            <th>¿Requiere instalación?</th>
                                                            <th>Observación usuario</th>
                                                            <th>Observación administrador</th>
                                                            <th *ngIf = "!admin()">Aprobación</th>
                                                            <th *ngIf = "!admin()" >Marcar leida</th>
                                                            <th *ngIf = "admin()" >Aprobado</th>
                                                            <th *ngIf = "admin()">No aprobado</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr *ngFor = "let notificacionNoLeida of notificacionesNoLeidas" [id]="notificacionNoLeida.id">
                                                      <th>{{notificacionNoLeida.nombre}}</th>
                                                      <td *ngIf = "admin()">{{notificacionNoLeida.nombreUsuario}} </td>
                                                      <td>{{notificacionNoLeida.tipo}} </td>
                                                      <td>{{notificacionNoLeida.hayElementos}} </td>
                                                      <td *ngIf = "!admin()"><textarea class="form-control" value = "{{notificacionNoLeida.observacionUsuario}}"  [(ngModel)]="notificacionNoLeida.observacionUsuario" (ngModelChange) = "cambioObservacionUsuario(notificacionNoLeida.id, 'No leida')" ></textarea> </td>
                                                      <td *ngIf = "admin()"> {{notificacionNoLeida.observacionUsuario}} </td>
                                                      <td *ngIf = "admin()" ><textarea class="form-control" value = "{{notificacionNoLeida.observacionAdmin}}"  [(ngModel)]="notificacionNoLeida.observacionAdmin" (ngModelChange) = "cambioObservacionAdmin(notificacionNoLeida.id)" ></textarea> </td>
                                                      <td *ngIf = "!admin()">{{notificacionNoLeida.observacionAdmin}}</td>
                                                      <td *ngIf = "!admin()">{{notificacionNoLeida.estado}}</td>
                                                      <td *ngIf = "!admin()"><input class="form-check-input" type="checkbox" id="checkbox{{notificacionNoLeida.id}}" value="" [(ngModel)]="notificacionNoLeida.leida" /></td>
                                                      <td *ngIf = "admin()"><input class="form-check-input" type="checkbox" id="checkbox{{notificacionNoLeida.id}}" value="" [(ngModel)]="notificacionNoLeida.aprobada" /></td>
                                                      <td *ngIf = "admin()"><input class="form-check-input" type="checkbox" id="checkbox{{notificacionNoLeida.id}}" value="" [(ngModel)]="notificacionNoLeida.noAprobada" /></td>
                                                    </tr>
                                                  </tbody>
                                                </table>
                                        </div>
                                    </div>
                                    <div *ngIf = "!admin()" class="divider"></div>
                                    <div *ngIf = "!admin()" class="row">
                                        <div class="col-lg-12  ">
                                            <h3 style="opacity: 0.4;">LEIDAS</h3>
                                                <table class = "table table-borderless">
                                                    <thead>
                                                        <tr>
                                                            <th></th>
                                                            <th *ngIf = "admin()">Usuario</th>
                                                            <th>Sensor</th>
                                                            <th>¿Requiere instalación?</th>
                                                            <th>Observación usuario</th>
                                                            <th>Observación administrador</th>
                                                            <th>Aprobación</th>
                                                            <th>Eliminar peticion</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor = "let notificacionLeida of notificacionesLeidas" [id]="notificacionLeida.id">
                                                            <th>{{notificacionLeida.nombre}}</th>
                                                            <td *ngIf = "admin()">{{notificacionNoLeida.nombreUsuario}}</td>
                                                            <td>{{notificacionLeida.tipo}} </td>
                                                            <td>{{notificacionLeida.hayElementos}} </td>
                                                            <td *ngIf = "!admin()"><textarea class="form-control" value = "{{notificacionLeida.observacionUsuario}}"  [(ngModel)]="notificacionLeida.observacionUsuario" (ngModelChange) = "cambioObservacionUsuario(notificacionLeida.id, 'Leida')" ></textarea> </td>
                                                            <td *ngIf = "admin()"> {{notificacionLeida.observacionUsuario}} </td>
                                                            <td *ngIf = "admin()" [(ngModel)]="notificacionLeida.observacionAdmin"><textarea class="form-control" value = "{{notificacionLeida.observacionAdmin}}"  [(ngModel)]="notificacionLeida.observacionAdmin" ></textarea> </td>
                                                            <td *ngIf = "!admin()">{{notificacionLeida.observacionAdmin}}</td>
                                                            <td>{{notificacionLeida.estado}}</td>
                                                            <td *ngIf = "!admin()"><input class="form-check-input" type="checkbox" id="checkbox{{notificacionLeida.id}}" value="" [(ngModel)]="notificacionLeida.eliminar" /></td>
                                                          </tr>
                                                  </tbody>
                                                </table>
                                                
                                        
                                    </div>
                                    
                                </div>
                                <div class="divider"></div>
                                    <div class="col-lg-12  ">
                                        <button display = "center"class="btn btn-primary btn-block fa-lg gradient-custom-2 mb-3" type="submit" (click)="actualizarObservacion()">Actualizo peticiones</button>
                                
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>
